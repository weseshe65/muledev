test
https://github.com/raml-org/raml-spec
https://github.com/OAI/OpenAPI-Specification
https://standards.rest/
https://anypoint.mulesoft.com/exchange/portals/anypoint-platform/f1e97bc6-315a-4490-82a7-23abe036327a.anypoint-platform/exchange-maven-facade-api-http/minor/2.0/pages/home/
https://docs.mulesoft.com/anypoint-cli/latest/exchange-assets#exchange-asset-upload
https://www.npmjs.com/package/api-catalog-cli
https://anypoint.mulesoft.com/exchange/portals/anyairline/a63e6d25-8aaf-4512-b36d-d91b90a55c4a/simplified-check-in-papi/minor/1.0/pages/home/
check-in-papi-app
https://code.visualstudio.com/
https://howhttps.works/why-do-we-need-https/
https://aws.amazon.com/certificate-manager/
https://letsencrypt.org/getting-started/
Path = check-in-papi.p12
Alias  = server
Both passwords = mule12345
curl --request PUT \
  --url https://localhost:8081/api/tickets/PNR123/checkin \
  --header 'Accept: application/json' \
  --header 'Content-Type: application/json' \
  --data '{
  "lastName": "Smith",
  "numBags": 2
}'
-M-Danypoint.platform.gatekeeper=disabled

-M-Danypoint.platform.client_id=
-M-Danypoint.platform.client_secret=

anypoint.platform.client_id
anypoint.platform.client_secret

https://check-in-papi-app-ckvify.5sc6y6-3.usa-e2.cloudhub.io/api/tickets/PNR123/checkin

https://www.nslookup.io/

https://www.sonarsource.com/products/sonarqube/downloads/

https://github.com/mulesoft-catalyst/mule-sonarqube-plugin

https://docs.mulesoft.com/release-notes/mule-maven-plugin/mule-maven-plugin-4.5.0-release-notes

https://docs.mulesoft.com/mule-runtime/latest/deploy-to-cloudhub-2
https://anypoint.mulesoft.com/accounts/api/me

	<parent>
		<groupId>4852afe9-f6d5-4fb6-b02c-c34f1412afcc</groupId>
		<artifactId>solutions-parent-pom</artifactId>
		<version>1.0.0</version>
		<relativePath>../parent-pom/pom.xml</relativePath>
	</parent>

check in implementation

<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<flow name="check-in-by-pnr" doc:id="e8ee80f4-33be-4b4c-8257-34a635f5ebab" >
		<ee:transform doc:name="Transform Message">
            <ee:variables>
                <ee:set-variable variableName="PNR">attributes.uriParams.'PNR'</ee:set-variable>
            </ee:variables>
        </ee:transform>
		<ee:transform doc:name="Transform Message">
            <ee:message>
                <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{
  paymentID: "PAY-1AKD7482FAB9STATKO"
} as Object {encoding: "UTF-8", mediaType: "application/json"}]]></ee:set-payload>
            </ee:message>
        </ee:transform>
	</flow>
	<flow name="payment-approval-by-pnr">
		<ee:transform doc:name="Transform Message">
            <ee:variables>
                <ee:set-variable variableName="PNR">attributes.uriParams.'PNR'</ee:set-variable>
            </ee:variables>
        </ee:transform>
		<ee:transform doc:name="Transform Message">
            <ee:message>
                <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{
  lastName: "Smith",
  flightDate: "2019-02-14",
  depart: "14:30:00",
  boarding: "13:15:00",
  gate: "4A",
  flight: "ANY6584",
  airportDepart: "ATL",
  airportArrive: "SFO",
  class: "Economy",
  seat: "16C",
  bagsCount: 2,
  PNR: "928382J"
} as Object {encoding: "UTF-8", mediaType: "application/json"}]]></ee:set-payload>
            </ee:message>
        </ee:transform>
	</flow>
</mule>

error-handling

<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
    <error-handler name="api-error-handler">
        <on-error-propagate type="APIKIT:BAD_REQUEST">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Bad request"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">400</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
        <on-error-propagate type="APIKIT:NOT_FOUND">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Resource not found"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">404</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
        <on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Method not allowed"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">405</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
        <on-error-propagate type="APIKIT:NOT_ACCEPTABLE">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Not acceptable"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">406</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
        <on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Unsupported media type"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">415</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
        <on-error-propagate type="APIKIT:NOT_IMPLEMENTED">
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Not Implemented"}]]></ee:set-payload>
                </ee:message>
                <ee:variables>
                    <ee:set-variable variableName="httpStatus">501</ee:set-variable>
                </ee:variables>
            </ee:transform>
        </on-error-propagate>
    </error-handler>
</mule>

global-config

<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway" 
      xmlns:tls="http://www.mulesoft.org/schema/mule/tls" 
      xmlns="http://www.mulesoft.org/schema/mule/core" 
      xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit" 
      xmlns:http="http://www.mulesoft.org/schema/mule/http" 
      xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xsi:schemaLocation="
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
        http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
        http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd
        http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/current/mule-tls.xsd
        http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd">

    <configuration-properties file="config.yaml" doc:name="Configuration properties"/>

    <http:listener-config name="api-httpListenerConfig">
        <http:listener-connection host="${http.host}" 
                                port="${http.port}" 
                                protocol="HTTPS" 
                                tlsContext="TLS_Context"/>
    </http:listener-config>

    <apikit:config name="api-config" 
        api="resource::4852afe9-f6d5-4fb6-b02c-c34f1412afcc:check-in-papi:1.0.0:oas:zip:api.json" 
        outboundHeadersMapName="outboundHeaders" 
        httpStatusVarName="httpStatus" />

    <tls:context name="TLS_Context" doc:name="TLS Context">
        <tls:key-store type="pkcs12" 
                       path="${tls.keystore.path}" 
                       alias="${tls.keystore.alias}" 
                       keyPassword="${tls.keystore.keyPassword}" 
                       password="${tls.keystore.password}"/>
    </tls:context>

    <api-gateway:autodiscovery apiId="${api.gateway.id}" 
                              ignoreBasePath="true" 
                              doc:name="API Autodiscovery" 
                              flowRef="api-main"/>

</mule>
